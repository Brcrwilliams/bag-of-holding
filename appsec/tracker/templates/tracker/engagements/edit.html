{% extends "tracker/engagements/base_engagements.html" %}

{% load staticfiles %}

{% block title %}{{ application.name }} | {{ engagement.start_date }} - {{ engagement.end_date }} | Edit Engagement{% endblock %}

{% block css %}
<link href="{% static 'css/vendor/datepicker3-1.3.1.css' %}" rel="stylesheet" media="screen">
{% endblock css %}

{% block engagement_breadcrumb %}
<li><a href="{% url 'tracker:application.engagements' application.id %}">Engagements</a></li>
<li><a href="{% url 'tracker:engagement.detail' engagement.id %}">{{ engagement.start_date }} - {{ engagement.end_date }}</a></li>
<li class="active">Edit Engagement</li>
{% endblock engagement_breadcrumb %}

{% block engagement_content %}
<div class="row">
  <div class="col-md-8">
    <form method="post" action="{% url 'tracker:engagement.edit' engagement.id %}">
      {% csrf_token %}
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Edit Engagement</h3>
        </div>
        <div class="panel-body">
          {% include "forms/form_snippet.html" with control=form.status %}
          <div class="input-daterange">
            {% include "forms/form_snippet.html" with control=form.start_date %}
            {% include "forms/form_snippet.html" with control=form.end_date %}
          </div>
          {% include "forms/form_snippet.html" with control=form.description %}
        </div>
        <div class="panel-footer">
          <button class="btn btn-primary" type="submit">Update Engagement</button>
          <a href="{% url 'tracker:engagement.detail' engagement.id %}" class="btn btn-default" role="button">Cancel</a>
        </div>
      </div>
    </form>
  </div>
  <div class="col-md-4">
    <div class="well hidden-sm hidden-xs">
      <p>Documentation about how engagement work here.</p>
    </div>
    <form method="post" action="{% url 'tracker:engagement.delete' engagement.id %}">
      {% csrf_token %}
      <button class="btn btn-danger" type="submit" onclick="return confirm('Are you sure want to delete this engagement?');">Delete Engagement</button>
    </form>
  </div>
</div>
{% endblock engagement_content %}

{% block js %}
<script src="{% static 'js/vendor/bootstrap-datepicker-1.3.1.js' %}"></script>
<script>
$('.input-daterange').datepicker({
  format: "yyyy-mm-dd",
  todayBtn: "linked",
  todayHighlight: true
});
</script>
{% endblock js %}
